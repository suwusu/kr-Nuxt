<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<style type="text/css">
	*{
		margin: 0px;
		padding: 0px;
	}
</style>
<body>
	<div id="print-box">
		<h1>fsfdsd</h1>
		<h1>fsfdsd</h1>
		<h1>fsfdsd</h1>
		<h1>fsfdsd</h1>
		<table border="1" data-id="table-tableName" table-name="tableName">
		  <tr>
		    <th data-label = "姓名" data-value="name">Month</th>
		    <th data-label = "金额" data-value="money">Savings</th>
		  </tr>
		  
		  <tr>
		  	<td>ja1</td>
		  	<td>1</td>
		  </tr>
		  <tr>
		  	<td>ja2</td>
		  	<td>2</td>
		  </tr>
		  <tr>
		  	<td>ja3</td>
		  	<td>3</td>
		  </tr>
		  <tr>
		  	<td>ja4</td>
		  	<td>4</td>
		  </tr>
		  <tr>
		  	<td>ja5</td>
		  	<td>5</td>
		  </tr>
		  <tr>
		  	<td>ja6</td>
		  	<td>6</td>
		  </tr>
		  <tr>
		  	<td>ja7</td>
		  	<td>7</td>
		  </tr>
		  <tr>
		  	<td>ja8</td>
		  	<td>8</td>
		  </tr>
		  <tr>
		  	<td>ja9</td>
		  	<td>9</td>
		  </tr>
		  <tr>
		  	<td>ja10</td>
		  	<td>10</td>
		  </tr>
		  <tr>
		  	<td>ja11</td>
		  	<td>11</td>
		  </tr>
		  <tr>
		  	<td>ja12</td>
		  	<td>12</td>
		  </tr>
		  <tr>
		  	<td>ja13</td>
		  	<td>13</td>
		  </tr>
		  <tr>
		  	<td>ja14</td>
		  	<td>14</td>
		  </tr>
		  <tr>
		  	<td>ja15</td>
		  	<td>15</td>
		  </tr>
		  <tr>
		  	<td>ja16</td>
		  	<td>16</td>
		  </tr>
		  <tr>
		  	<td>ja17</td>
		  	<td>17</td>
		  </tr>
		  <tr>
		  	<td>ja18</td>
		  	<td>18</td>
		  </tr>
		  <tr>
		  	<td>ja19</td>
		  	<td>19</td>
		  </tr>
		  <tr>
		  	<td>ja20</td>
		  	<td>20</td>
		  </tr>
		  <tr>
		  	<td>ja21</td>
		  	<td>21</td>
		  </tr>
		  <tr>
		  	<td>ja22</td>
		  	<td>22</td>
		  </tr>
		  <tr>
		  	<td>ja23</td>
		  	<td>23</td>
		  </tr>
		  <tr>
		  	<td>ja24</td>
		  	<td>24</td>
		  </tr>
		  <tr>
		  	<td>ja25</td>
		  	<td>25</td>
		  </tr>
		  <tr>
		  	<td>ja26</td>
		  	<td>26</td>
		  </tr>
		  <tr>
		  	<td>ja27</td>
		  	<td>27</td>
		  </tr>
		  <tr>
		  	<td>ja28</td>
		  	<td>28</td>
		  </tr>
		  <tr>
		  	<td>ja29</td>
		  	<td>29</td>
		  </tr>
		  <tr>
		  	<td>ja30</td>
		  	<td>30</td>
		  </tr>
		  <tr>
		  	<td>ja31</td>
		  	<td>31</td>
		  </tr>
		  <tr>
		  	<td>ja32</td>
		  	<td>32</td>
		  </tr>
		  <tr>
		  	<td>ja33</td>
		  	<td>33</td>
		  </tr>
		  <tr>
		  	<td>ja34</td>
		  	<td>34</td>
		  </tr>
		  <tr>
		  	<td>ja35</td>
		  	<td>35</td>
		  </tr>
		  <tr>
		  	<td>ja36</td>
		  	<td>36</td>
		  </tr>
		  <tr>
		  	<td>ja37</td>
		  	<td>37</td>
		  </tr>
		  <tr>
		  	<td>ja38</td>
		  	<td>38</td>
		  </tr>
		  <tr>
		  	<td>ja39</td>
		  	<td>39</td>
		  </tr>
		  <tr>
		  	<td>ja40</td>
		  	<td>40</td>
		  </tr>
		  <tr>
		  	<td>ja41</td>
		  	<td>41</td>
		  </tr>
		  <tr>
		  	<td>ja42</td>
		  	<td>42</td>
		  </tr>
		  <tr>
		  	<td>ja43</td>
		  	<td>43</td>
		  </tr>
		  <tr>
		  	<td>ja44</td>
		  	<td>44</td>
		  </tr>
		  <tr>
		  	<td>ja45</td>
		  	<td>45</td>
		  </tr>
		  <tr>
		  	<td>ja46</td>
		  	<td>46</td>
		  </tr>
		  <tr>
		  	<td>ja47</td>
		  	<td>47</td>
		  </tr>
		  <tr>
		  	<td>ja48</td>
		  	<td>48</td>
		  </tr>
		  <tr>
		  	<td>ja49</td>
		  	<td>49</td>
		  </tr>
		  <tr>
		  	<td>ja50</td>
		  	<td>50</td>
		  </tr>
		  <tr>
		  	<td>ja51</td>
		  	<td>51</td>
		  </tr>
		  <tr>
		  	<td>ja52</td>
		  	<td>52</td>
		  </tr>
		  <tr>
		  	<td>ja53</td>
		  	<td>53</td>
		  </tr>
		  <tr>
		  	<td>ja54</td>
		  	<td>54</td>
		  </tr>
		  <tr>
		  	<td>ja55</td>
		  	<td>55</td>
		  </tr>
		  <tr>
		  	<td>ja56</td>
		  	<td>56</td>
		  </tr>
		  <tr>
		  	<td>ja57</td>
		  	<td>57</td>
		  </tr>
		  <tr>
		  	<td>ja58</td>
		  	<td>58</td>
		  </tr>
		  <tr>
		  	<td>ja59</td>
		  	<td>59</td>
		  </tr>
		  <tr>
		  	<td>ja60</td>
		  	<td>60</td>
		  </tr>
		  <tr>
		  	<td>ja61</td>
		  	<td>61</td>
		  </tr>
		  <tr>
		  	<td>ja62</td>
		  	<td>62</td>
		  </tr>
		  <tr>
		  	<td>ja63</td>
		  	<td>63</td>
		  </tr>
		  <tr>
		  	<td>ja64</td>
		  	<td>64</td>
		  </tr>
		  <tr>
		  	<td>ja65</td>
		  	<td>65</td>
		  </tr>
		  <tr>
		  	<td>ja66</td>
		  	<td>66</td>
		  </tr>
		  <tr>
		  	<td>ja67</td>
		  	<td>67</td>
		  </tr>
		  <tr>
		  	<td>ja68</td>
		  	<td>68</td>
		  </tr>
		  <tr>
		  	<td>ja69</td>
		  	<td>69</td>
		  </tr>
		  <tr>
		  	<td>ja70</td>
		  	<td>70</td>
		  </tr>
		  <tr>
		  	<td>ja71</td>
		  	<td>71</td>
		  </tr>
		  <tr>
		  	<td>ja72</td>
		  	<td>72</td>
		  </tr>
		  <tr>
		  	<td>ja73</td>
		  	<td>73</td>
		  </tr>
		  <tr>
		  	<td>ja74</td>
		  	<td>74</td>
		  </tr>
		  <tr>
		  	<td>ja75</td>
		  	<td>75</td>
		  </tr>
		  <tr>
		  	<td>ja76</td>
		  	<td>76</td>
		  </tr>
		  <tr>
		  	<td>ja77</td>
		  	<td>77</td>
		  </tr>
		  <tr>
		  	<td>ja78</td>
		  	<td>78</td>
		  </tr>
		  <tr>
		  	<td>ja79</td>
		  	<td>79</td>
		  </tr>
		  <tr>
		  	<td>ja80</td>
		  	<td>80</td>
		  </tr>
		  <tr>
		  	<td>ja81</td>
		  	<td>81</td>
		  </tr>
		  <tr>
		  	<td>ja82</td>
		  	<td>82</td>
		  </tr>
		  <tr>
		  	<td>ja83</td>
		  	<td>83</td>
		  </tr>
		  <tr>
		  	<td>ja84</td>
		  	<td>84</td>
		  </tr>
		  <tr>
		  	<td>ja85</td>
		  	<td>85</td>
		  </tr>
		  <tr>
		  	<td>ja86</td>
		  	<td>86</td>
		  </tr>
		  <tr>
		  	<td>ja87</td>
		  	<td>87</td>
		  </tr>
		  <tr>
		  	<td>ja88</td>
		  	<td>88</td>
		  </tr>
		  <tr>
		  	<td>ja89</td>
		  	<td>89</td>
		  </tr>
		  <tr>
		  	<td>ja90</td>
		  	<td>90</td>
		  </tr>
		  <tr>
		  	<td>ja91</td>
		  	<td>91</td>
		  </tr>
		  <tr>
		  	<td>ja92</td>
		  	<td>92</td>
		  </tr>
		  <tr>
		  	<td>ja93</td>
		  	<td>93</td>
		  </tr>
		  <tr>
		  	<td>ja94</td>
		  	<td>94</td>
		  </tr>
		  <tr>
		  	<td>ja95</td>
		  	<td>95</td>
		  </tr>
		  <tr>
		  	<td>ja96</td>
		  	<td>96</td>
		  </tr>
		  <tr>
		  	<td>ja97</td>
		  	<td>97</td>
		  </tr>
		  <tr>
		  	<td>ja98</td>
		  	<td>98</td>
		  </tr>
		  <tr>
		  	<td>ja99</td>
		  	<td>99</td>
		  </tr>
		  <tr>
		  	<td>ja100</td>
		  	<td>100</td>
		  </tr>
		</table>
		<div data-id = "tableBox-tableName"></div>
	</div>
</body>
<script type="text/javascript">
	(function(){
		//获取所有的表
		var tableElem = document.querySelectorAll('table[data-id^="table-"]');
		//获取页面包住表的div
		var pageHeight = 500;

		tableDetailRender(tableElem);//所有的明细表格循环
		//循环已有表格
		function tableDetailRender(elems){
			for (var i = elems.length - 1; i >= 0; i--) {
				everyTableDetail(elems[i]);
			}
		}
		//已有表格的每一个表格
		/**
		elem  每一个明细表
		*/
		function everyTableDetail(elem){
			//获取当前表明
			var tableName = elem.getAttribute('table-name');
			//获取所有的tr 为数组
			var allTrDetail = getAllTrContent(elem);
			var tableBox = document.querySelectorAll('div[data-id="tableBox-'+tableName+'"]')[0];
			//获取表头
			var hander = allTrDetail[0];
			elem.parentNode.removeChild(elem);
			allTrDetail=allTrDetail.slice(1, allTrDetail.length)
			tableSplit(tableBox,allTrDetail,hander,0);
		}

		function tableSplit(tableBox,allTrDetail,hander,num){
			var tableId = "table"+num;
			var divId = "div"+num;
			var trHtml = '<tr>'+hander+'</tr>';
			tableBox.innerHTML+= '<div id="'+divId+'"><table id="'+tableId+'" >'+trHtml+'</table></div>';
			for (var i = 0; i < allTrDetail.length ; i++) {
				var oldtrHtml = trHtml;
				trHtml+='<tr>'+allTrDetail[i]+'</tr>';
				var newTable = document.getElementById(tableId);
				newTable.innerHTML = trHtml
				var divElem = document.getElementById(divId);
				var divDetail = divElem.getBoundingClientRect();
				if(Math.floor(divDetail.top/pageHeight) != Math.floor(divDetail.bottom/pageHeight)){
					newTable.innerHTML = oldtrHtml;
					allTrDetail=allTrDetail.slice(i, allTrDetail.length)
					divElem = document.getElementById(divId);
					var divDetail = divElem.getBoundingClientRect();
					var divHeight = (Math.ceil(divDetail.bottom/pageHeight)*pageHeight)- divDetail.top;
					divElem.style.height = divHeight+'px';
					break;
				}
			}
			//数组不存在或者数组长度为零或者数组循环到结尾则不再继续
			if(!allTrDetail || !allTrDetail.length || i==allTrDetail.length){
				return false;
			}else{
				tableSplit(tableBox,allTrDetail,hander,num+=1)
			}
		}
		function getAllTrContent(elem){
			var contents = elem.querySelectorAll("tr");
			var arr = [];
			for (var i = 0; i <contents.length; i++) {
				arr.push(contents[i].innerHTML);
			}
			return arr;
		}
		
	})()
	
</script>
</html>